var TECH5S_FILE_BROWSER=function(e){var t="TECH5S_FILE_BROWSER",i={maxFiles:3,maxSize:2e6,accept:"image/jpeg,image/png,image/gif",selectorListResult:".list-attachs",selectorRemoveButton:".list-attachs span.close",selectorInputFile:"input[type=file]",acceptError:"Nháº­p Ä‘Ăºng Ä‘á»‹nh dáº¡ng file",maxFilesError:"Nháº­p quĂ¡ sá»‘ lÆ°á»£ng File cho phĂ©p",sizeError:"KĂ­ch cá»¡ quĂ¡ giá»›i háº¡n cho phĂ©p",fileName:"files[]"},n=e.fn[t],r=function(){var t=[];function n(e,t){this._config=t,this._element=e,this.init()}return n.prototype.init=function(){this.initChooseFile(),this.initRemoveImage()},n.prototype.initChooseFile=function(){var e=this,i=e._element.find(e._config.selectorInputFile);i.change(function(n){if(n.target.files)for(var r=n.target.files,o=e._config.maxFiles,a=0;a<r.length;a++){var s=r[a],l=new FileReader;l.onload=function(n){return function(r){if(t.length>=o)return TOTAL_RATING_ALERT.alert(e._config.maxFilesError,"error"),void r.preventDefault();e.applyFileValidationRules(r,n)&&(e.renderThumbnail(r,n),t.push(n)),i.val(null)}}(s),l.readAsDataURL(s)}})},n.prototype.applyFileValidationRules=function(e,t){var i=this._config.size;return this._config.accept.split(",").includes(t.type)?!(t.size>i)||(e.preventDefault(),TOTAL_RATING_ALERT.alert(this._config.sizeError,"error"),e.target.abort(),!1):(e.preventDefault(),TOTAL_RATING_ALERT.alert(this._config.acceptError,"error"),e.target.abort(),!1)},n.prototype.showAlert=function(e,t){"object"==typeof window.toastr?"success"==t?window.toastr.success(e):window.toastr.error(e):alert(e)},n.prototype.initRemoveImage=function(){e(document).on("click",this._config.selectorRemoveButton,function(i){i.preventDefault();var n=e(this).parent(),r=n.index();t.splice(r,1),n.remove()})},n.prototype.renderThumbnail=function(e,t){var i='<li class="item-img"> <span class="close">&times;</span><img class="thumb" src="'+e.target.result+'" title="'+escape(t.name)+'" data-id="'+t.name+'"/></li>';this._element.find(this._config.selectorListResult).append(i)},n.prototype.buildFormData=function(){for(var e=new FormData,i=this._element.serializeArray(),n=0;n<i.length;n++)e.append(i[n].name,i[n].value);var r=t.length>this._config.maxFiles?this._config.maxFiles:t.length;for(n=0;n<r;n++){var o=t[n];e.append(this._config.fileName,o)}return e},n.prototype.resetData=function(){this._element.find(this._config.selectorListResult).html(null),t=[]},n._jQueryInterface=function(t){var r=[];return this.each(function(){var o=e.extend({},i,t,e(this).data());r.push(new n(e(this),o))}),r},n}();return e.fn[t]=r._jQueryInterface,e.fn[t].Constructor=r,e.fn[t].noConflict=function(){return e.fn[t]=n,r._jQueryInterface},r}(jQuery);